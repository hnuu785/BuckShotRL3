---
alwaysApply: true
---

# 상태 (Input)
상태 벡터 구성 (총 20차원)

1. 턴 정보 (1차원)
- 0: Blue 턴, 1: Red 턴
2. 총알 정보 (3차원)
- 총 총알 개수 (rounds.Count)
- 실탄 개수 (totalReal)
- 빈 총알 개수 (totalEmpty)
3. 생명력 (2차원)
- Red 생명력 (redLives)
- Blue 생명력 (blueLives)
4. Red 아이템 (5차원)
- Energy Drink (ED)
- Magnifying Glass (MG)
- Cigar (C)
- Knife (K)
- Handcuffs (HC)
5. Blue 아이템 (5차원)
- Energy Drink (ED)
- Magnifying Glass (MG)
- Cigar (C)
- Knife (K)
- Handcuffs (HC)
6. 총 상태 (2차원)
- 총 데미지 (gunDamage: 1 또는 2)
- 다음 총알 정보 (knowledge: -1=알 수 없음, 0=빈 총알, 1=실탄, 2=미확인)
7. 수갑 상태 (2차원)
- Blue 수갑 상태 (blueCuff: 0 또는 1)
- Red 수갑 상태 (redCuff: 0 또는 1)

총 20차원 벡터로, Unity에서 쉼표로 구분된 문자열로 전송되고 Python에서 파싱해 사용합니다.

# 행동 (Output)
## 유니티
public enum ActionType
{
    ShootSelf = 1,
    ShootOther = 2,
    Drink = 3,
    MagGlass = 4,
    Cigar = 5,
    Knife = 6,
    Handcuffs = 7
}

## 파이썬
인덱스 액션 이름 설명
0	ShootSelf	자신에게 쏘기
1	ShootOther	상대에게 쏘기
2	Drink	Energy Drink 사용 (총알 제거)
3	MagGlass	Magnifying Glass 사용 (다음 총알 확인)
4	Cigar	Cigar 사용 (체력 회복)
5	Knife	Knife 사용 (데미지 2배)
6	Handcuffs	Handcuffs 사용 (상대 턴 스킵)

# 보상
## 1. 기본 보상 체계 (Base Rewards)
가장 중요한 목표는 상대를 죽이는 것입니다. 다른 모든 보상은 이 목표보다 작아야 합니다.

| 상황 | 보상 값 | 설명 |
|------|---------|------|
| 승리 (Win) | +50.0 | 게임의 궁극적 목표 |
| 패배 (Loss) | -50.0 | 피해야 할 최악의 결과 |

## 2. 행동별 즉시 보상 (Intermediate Rewards)
매 턴마다 AI가 좋은 판단을 했는지 피드백을 줍니다. 여기서 핵심은 **"상대의 체력을 깎고, 내 체력을 보존하며, 턴을 유지하는 것"**입니다.

### A. 사격 관련 (Shooting)

| 행동 결과 | 보상 값 | 설명 |
|-----------|---------|------|
| 상대에게 적중 (실탄) | +(데미지 × 10) | 기본 10, 칼(Knife) 사용 시 20. 상대 체력을 깎는 것은 승리로 가는 지름길입니다. |
| 상대에게 불발 (빈 총알) | -5.0 | 상대에게 턴을 넘겨주게 되므로 손해입니다. |
| 나에게 적중 (실탄) | -(데미지 × 15) | 자해는 큰 페널티입니다. (패배 위험 증가) |
| 나에게 불발 (빈 총알) | +15.0 | 매우 중요. 턴을 유지하며 총알을 소모했으므로 큰 전략적 이득입니다. |

### B. 아이템 사용 (Item Usage)
아이템은 **"유효하게 사용했을 때"**만 보상을 주어야 합니다. 낭비를 방지하기 위함입니다.

| 아이템 | 조건 | 보상 값 | 설명 |
|--------|------|---------|------|
| Beer (Drink) | 실탄 배출 시 | +5.0 | 위험 요소 제거 성공 |
| Beer (Drink) | 빈 총알 배출 시 | +1.0 | 확률을 돌렸다는 점에서 소폭 이득 |
| Cigar | 체력 < 최대치 | +5.0 | 유효한 회복 |
| Cigar | 체력 == 최대치 | -2.0 | 아이템 낭비 (Penalty) |
| Handcuffs | 상대 수갑 X | +7.0 | 상대 턴 스킵은 매우 강력한 공격 기회 |
| Handcuffs | 상대 수갑 O | -10.0 | 무효 행동 (이미 걸려있음) |
| Knife | 사용 후 적중 | +5.0 | (데미지 보상과 별도로 추가 전략 점수) |
| Knife | 사용 후 빗나감 | -5.0 | 아이템 낭비 |
| MagGlass | 확인 후 적절한 행동 | +3.0 | 정보 획득 자체에 소폭 보상 |

## 3. 페널티 (Penalties)
AI가 학습 초기에 말도 안 되는 행동을 줄이도록 강한 페널티를 줍니다.

| 불가능한 행동 (Invalid Action) | -50.0 |
|-------------------------------|-------|
| 예: 아이템이 없는데 사용 시도, 총알이 없는데 사격 시도 등. |
| (Unity 환경에서 아예 입력을 막는다면 이 보상은 필요 없지만, 선택은 가능하되 무효화된다면 페널티가 필요합니다.) |

보상은 즉시 보상(immediate reward) 방식으로, 각 액션 후 즉시 계산되어 에이전트에 전달됩니다.

